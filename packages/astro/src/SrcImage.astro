---
import type { SrcImageProps } from "..";
import { buildSrc } from "./utils";

type Props = SrcImageProps;

const { src, srcset, customDomain, includeInSitemap, ...rest } = Astro.props;

const { src: builtSrc, srcset: builtSrcset } = buildSrc({
  src,
  srcset,
  origin: Astro.url.origin,
  customDomain: customDomain,
  pagePath: Astro.url.pathname,
  environment: import.meta.env.MODE,
  includeInSitemap: includeInSitemap,
});
---

<img src={builtSrc} srcset={builtSrcset} {...rest as any} />
