---
import type { SrcObjImageProps } from "..";
import { buildSrc } from "./utils";

type Props = SrcObjImageProps;

const { srcObj, customDomain, includeInSitemap, ...rest } = Astro.props;
const { src, width, height } = srcObj;

const { src: builtSrc } = buildSrc({
  src,
  origin: Astro.url.origin,
  customDomain: customDomain,
  pagePath: Astro.url.pathname,
  environment: import.meta.env.MODE,
  includeInSitemap: includeInSitemap,
});
---

<img src={builtSrc} width={width} height={height} {...rest as any} />
